{"version":3,"sources":["../../src/pages/checkout/checkout.module.ts","webpack:///./src/pipes/pipes.module.ts?9a8a*****","webpack:///./src/pipes/rupiah.ts?d03a*****","../../src/pages/checkout/checkout.ts"],"names":[],"mappings":"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","file":"6.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { Checkout } from './checkout';\r\nimport { PipesModule } from '../../pipes/pipes.module';\r\n\r\n@NgModule({\r\n\tdeclarations:[Checkout],\r\n\timports:[IonicPageModule.forChild(Checkout),PipesModule],\r\n\texports:[Checkout]\r\n})\r\n\r\nexport class CheckoutModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/checkout/checkout.module.ts","import { NgModule } from '@angular/core';\r\n\r\nimport { Rupiah } from './rupiah';\r\n\r\n@NgModule({\r\n\tdeclarations:[Rupiah],\r\n\timports:[],\r\n\texports:[Rupiah]\r\n})\r\n\r\nexport class PipesModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'rupiah',\n})\n\nexport class Rupiah implements PipeTransform {\n  transform(angka: any) {\n    if (angka == null || angka == undefined)\n      return false;\n    else {\n  \t  if (typeof(angka) != 'string') {\n  \t\t  angka = angka.toString();\n  \t  }\n\n  \t  let reg = new RegExp('([0-9]+)([0-9]{3})');\n  \t  while (reg.test(angka)) angka = angka.replace(reg, '$1.$2');\n      return 'Rp'+angka;\n     }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/rupiah.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, LoadingController } from 'ionic-angular';\n\nimport { RestfulApi } from '../../providers/restful-api';\nimport { Sound } from '../../providers/sound';\nimport { Pembeli, Jual, Laba } from './custom-data';\n\n@IonicPage()\n@Component({\n  selector: 'page-checkout',\n  templateUrl: 'checkout.html',\n})\n\nexport class Checkout {\n  id: string;\n  loader: any;\n\tkecamatan: string|number[];\n  desa: string|number[];\n  errorMessage: any;\n  total: number;\n  jual: Jual={};\n  laba: Laba={};\n  pembeli: Pembeli={};\n  loading: boolean = false;\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public alertCtrl:AlertController,\n    public loadingCtrl:LoadingController,\n    public sound:Sound,\n    private restfulApi:RestfulApi) {\n  }\n\n  ionViewDidLoad(){\n    let cart = JSON.parse(localStorage.getItem('cart'));\n    this.id = this.navParams.get('id');\n    this.getKecamatan();\n    this.jual = {kode:this.createKode(),waktu:this.createDate(),status:'ordered'};\n    this.laba= {kode:this.jual.kode}\n    \n    // insert variabel dari keranjang ke variabel lain untuk di post API\n    for (var i in cart) {\n      if (cart[i].id == this.id)\n        this.jual.item = cart[i].item;\n        this.jual.jumlah = cart[i].jumlah;\n        this.total = cart[i].total;\n        this.pembeli.kode = this.jual.kode;\n\n        this.laba.jumlah = cart[i].jumlah;\n        this.laba.margin = cart[i].total / cart[i].jumlah - cart[i].modal;\n        this.laba.laba = this.laba.margin*this.laba.jumlah;\n    }\n  }\n\n\n  // tampilkan desa sesuai kecamatan yang dipilih\n  getDesa(ev:any){\n    this.loading = true;\n    this.restfulApi.getDesa(ev)\n      .subscribe(\n        desa => { \n          this.desa = desa;\n          this.loading = false; },\n        error => this.errorMessage = <any>error);\n  }\n\n  //tampilkan kecamatan\n  getKecamatan(){\n    this.restfulApi.getKecamatan()\n      .subscribe(\n        kecamatan => { this.kecamatan = kecamatan},\n        error => this.errorMessage = <any>error);\n  }\n\n  // post API 3 tabel\n  postData(){\n    this.sound.play('tabSwitch');\n    this.presentLoading();\n    this.restfulApi.postJualDetail(this.jual)\n    .subscribe(hasil => {console.log('hai'); });\n\n\n    this.restfulApi.postPembeli(this.pembeli)\n    .subscribe(hasil => {console.log('hai'); });\n\n    this.restfulApi.postLaba(this.laba)\n    .subscribe(hasil => this.showAlert());\n  }\n\n  // tampilkan alert \n  showAlert() {\n    this.loader.dismiss();\n    let alert = this.alertCtrl.create({\n      subTitle: 'Terima kasih , Pesanan akan segera kami proses',\n      buttons: [\n        {\n          text:'OK',\n          handler:data => {\n            this.navCtrl.popToRoot();\n          }\n        }]\n    });\n    alert.present();\n    this.removeCart();\n  }\n\n  //show loading\n  presentLoading() {\n    this.loader = this.loadingCtrl.create({\n      content: \"Please wait...\"\n    });\n    this.loader.present();\n  }\n\n  // hapus cart setelah checkout\n  removeCart(){\n    let ambil = JSON.parse(localStorage.getItem('cart'));\n\n    for (var i in ambil) {\n      if (ambil[i].id == this.id ) {\n        ambil.splice(i,1);\n        localStorage.setItem('cart',JSON.stringify(ambil));\n      }\n    }\n  }\n\n  // membuat kode order\n  createKode(){\n    let kode = Math.random().toString(36).substr(2, 5);\n    return kode;\n  }\n\n  // menampilkan tanggal dan jam order\n  createDate(){\n    let full = new Date();\n    let tanggal = full.getDate();\n    let bulan = full.getMonth()+1;\n    let tahun = full.getFullYear();\n    let jam = full.getHours()+':'+full.getMinutes();\n\n    let hasil = tahun+'-'+bulan+'-'+tanggal+' '+jam;\n    return hasil;\n  }\n\n  //play sound\n  play(){\n    this.sound.play('tabSwitch');\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/checkout/checkout.ts"],"sourceRoot":""}